<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>One Page Wonder - Start Bootstrap Template</title>

  <!-- Bootstrap core CSS -->
  <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="../css/style.css" rel="stylesheet">
  <link href="../css/one-page-wonder.min.css" rel="stylesheet">

</head>

<body>


  <header class="masthead text-center text-white" style="background:linear-gradient(0deg,#fccdae 0,#00bfb5 100%)">
    <div class="masthead-content">
      <div class="container">
        <h1 class="masthead-heading mb-0">카드를 태그해주세요</h1>
        <span id="fake" style="display: none;">zz</span>
      </div>
    </div>
  </header>

  <!-- Bootstrap core JavaScript -->
  <script src="../vendor/jquery/jquery.min.js"></script>
  <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

</body>

</html>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

  setInterval(function() {
    var API_URL = 'https://gcjxk00ls1.execute-api.us-east-1.amazonaws.com/iot-user/start2';
      $.ajax({
            type: 'POST',
            error: function(xhr, status, error){
              console.log(error);
            },
            url: API_URL,
            // async: false,
            data: JSON.stringify({
              "fakedata": $('#fake').text(),
            }),
            contentType: "application/json",
            //API Gateway 설정에서 매핑 템플릿을 설정하였으므로 그 이름과 동일하게 씀

            success: function (data) {
              if (data['login_status'] == 1) {
                sessionStorage.setItem("rfid", data["rfid"]);
                sessionStorage.setItem("nickname", data["nickname"]);
                console.log("로그인된상태");
                // console.log(data);
                // console.log('성공!');
                // alert("로그인 성공!");
              }
              else{
                console.log("로그인 안!!!!!된상태");
                console.log(data)
              }
            }
          });
  }, 2000);
  
</script>